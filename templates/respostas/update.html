{% include "header.html" %}

{% block body %}
<div class="container">

    <div class="row">

        <div class="col md-12">

            <!-- <h2>Student List <button type="button" class="btn btn-success  pull-right" data-toggle="modal"
                    data-target="#myModal">Add Student Data</button></h2> -->

                    <div class="modal-dialog">

                        <div class="modal-content">
    
                            <div class="modal-header">
    
                                <button type="button" class="close" data-dismiss="modal" onclick="rederecionar('http://127.0.0.1:3000/v1.0/respostas/')">&times;</button>
    
                                <h4 class="modal-title">Alterar Informação da resposta</h4>
    
                            </div>
    
                            <div class="modal-body">
                                
                                <form id="resposta_update">
    
                                    <!-- <div class="form-group">
                                        <input type="hidden" name="id" value="{{resposta['resposta_id']}}">

                                        <label>resposta:</label>
                                        <input type="text" class="form-control" name="resposta" value="{{resposta['resposta_sql']}}">
    
                                    </div> -->
    
                                    <div class="form-group">
    
                                        <label>resposta SQL:</label>
    
                                        <input type="text" class="form-control" name="resposta_sql" value="{{resposta['resposta_sql']}}">
    
                                    </div>

                                    <div class="form-group">
    
                                        <label>Aluno_Aluno_ID:</label>
    
                                        <input type="text" class="form-control" name="aluno_aluno_id" value="{{resposta['aluno_aluno_id']}}">
    
                                    </div>

                                    <div class="form-group">
    
                                        <label>Pergunta_Pergunta_ID:</label>
    
                                        <input type="text" class="form-control" name="pergunta_pergunta_id" value="{{resposta['pergunta_pergunta_id']}}">
    
                                    </div>
    
                                    <div class="form-group">
    
                                        <button class="btn btn-primary" input type="submit" onclick="resposta_update()">Alterar</button>
    
                                    </div>
    
                                </form>
    
                            </div>
    
                            <div class="modal-footer">
    
                                <button type="button" class="btn btn-default" data-dismiss="modal" onclick="rederecionar('http://127.0.0.1:3000/v1.0/respostas/')">Fechar</button>
    
                            </div>
                        </div>
                    </div>

    </div>

    </div>

</div>

</div>
{% endblock %}


<script type="text/javascript" src="{{url_for('static', filename='js/jquery-3.2.1.min.js') }}"></script>

<script type="text/javascript" src="{{url_for('static', filename = 'js/bootstrap.min.js')}}"></script>

<script>
    function resposta_update(){
        try{
            let formElement = document.getElementById("resposta_update")
            let formData = new FormData(formElement)
            let data = {'resposta_sql': formData.get('resposta_sql'),
                        'aluno_aluno_id': formData.get('aluno_aluno_id'),
                        'pergunta_pergunta_id': formData.get('pergunta_pergunta_id')}
            $.ajax({
                type: "POST",
                url: "http://127.0.0.1:80/v1.0/resposta/update/{{resposta['resposta_id']}}",
                data: data,
                //dataType: "json",
                //crossDomain: true,
                /*xhrFields: {
                    withCredentials: true
                },*/
                success: function(data){
                    location.href = "http://127.0.0.1:3000/v1.0/respostas/"
                    //alert(data)
                    //console.log(data)
                },
                error(jqXHR,JQueryXHR,errorThrown){
                    //console.log(formData)
                    console.log(jqXHR)
                    console.log(JQueryXHR)
                    console.log(errorThrown)
                    alert(jqXHR)
                    alert(JQueryXHR)
                    alert(errorThrown)
                }
            })
        }catch(err){
            alert(err)
        }
    }

    function rederecionar(location_href){
        location.href = location_href
    }
</script>